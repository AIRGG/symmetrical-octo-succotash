import{Q as e,b as a}from"./QItemLabel.ed81b066.js";import{a as l}from"./QSelect.00c3c8b7.js";import{j as o,ca as s,r as i,x as t,aA as r,a1 as n,b2 as d,d as c,J as u,cJ as f,a4 as m,aa as b,cb as g,c4 as w}from"./index.1921beeb.js";import{Q as v}from"./QBadge.2b2d9dcd.js";import{Q as p,a as y}from"./QTd.14f40a51.js";import{Q as h}from"./QPage.a28e4bed.js";import{c as C}from"./index.229e2d0a.js";import{u as x,t as j,Q as k,b as L}from"./module-master.be57f47e.js";import{u as O}from"./myglobalstate.9e951e82.js";import"./QList.0ff0e2c9.js";const Q={class:"row q-col-gutter-xs"},_={class:"col-12"},q={class:"row q-mb-md q-col-gutter-xs"},A={class:"col-6"},V={class:"col-6"},W={class:"row q-mb-md justify-between"},J={class:"q-gutter-xs"},S={class:"q-gutter-xs"},D={class:"row"},N={class:"col-12"},z={class:"row self-center content-center justify-center q-gutter-xs"},P=o({__name:"MasterWarehousePage",setup(o){const P=s(),R=x();O().title="Master Warehouse",JSON.parse(JSON.stringify(j));const U=i(C(R.officeList)),B=i([{name:"offid",label:"Office",field:"offdesc",align:"left",sortable:!0},{name:"wareid",label:"Wearehouse Code",field:"wareid",align:"left",sortable:!0},{name:"waredesc",label:"Desc",field:"waredesc",align:"left",sortable:!0},{name:"action",label:"Action",field:"",required:!0,align:"center"}]),I=i(),M=t({isedit:!1,action:"Add",disable:!1,index:-1,warehouse:C(L),oldid:JSON.stringify(C(L))}),E=i(),F=async()=>{var e;E.value.reset(),M.isedit=!1,M.disable=!1,M.action="Add",M.warehouse=C(L),M.oldid=null!=(e=JSON.stringify(C(L)))?e:"",R.getWarehouseAll(),U.value=C(R.officeList)},T=(e,a)=>{var l;console.log(e),M.disable=!0,M.isedit=!0,M.action="Detail",M.oldid=null!=(l=JSON.stringify(e))?l:"",M.warehouse=C(e)},Y=async()=>{if(await E.value.validate()){console.log("ok"),console.log(M,"here");try{await R.saveWarehouse(M),F()}catch(e){}}},G=async(e,a)=>{if(U.value&&U.value.length>0)return""===e?void a((()=>{U.value=R.officeList})):void a((()=>{const a=e.toLowerCase();U.value=R.officeList.filter((e=>e.offdesc&&e.offdesc.toLowerCase().indexOf(a)>-1))}));await R.getOfficeAll(),a((()=>{U.value=R.officeList}))},H=[e=>e&&e.length>0||"Required!"];return Promise.all([R.getOfficeAll(),R.getWarehouseAll()]).then((e=>{U.value=C(R.officeList)})),(o,s)=>(r(),n(h,{padding:""},{default:d((()=>[c(u(f),{greedy:"",ref_key:"formRef",ref:E},{default:d((()=>[m("div",Q,[m("div",_,[c(l,{filled:"",modelValue:u(M).warehouse.offid,"onUpdate:modelValue":s[0]||(s[0]=e=>u(M).warehouse.offid=e),"use-input":"",dense:"","lazy-rules":"","input-debounce":"0",label:"Office",options:U.value,rules:H,onFilter:G,"option-value":"offcode","option-label":"offdesc","emit-value":"","map-options":"",behavior:"menu"},{"no-option":d((()=>[c(e,null,{default:d((()=>[c(a,{class:"text-grey"},{default:d((()=>[b(" No results ")])),_:1})])),_:1})])),_:1},8,["modelValue","options"])])]),m("div",q,[m("div",A,[c(g,{dense:"",filled:"","lazy-rules":"",rules:H,label:"Warehouse Code",modelValue:u(M).warehouse.wareid,"onUpdate:modelValue":s[1]||(s[1]=e=>u(M).warehouse.wareid=e)},null,8,["modelValue"])]),m("div",V,[c(g,{dense:"",filled:"","lazy-rules":"",rules:H,label:"Description",modelValue:u(M).warehouse.waredesc,"onUpdate:modelValue":s[2]||(s[2]=e=>u(M).warehouse.waredesc=e)},null,8,["modelValue"])])])])),_:1},512),m("div",W,[m("div",J,[c(v,{outline:"",color:"primary",label:u(M).action},null,8,["label"])]),m("div",S,[c(w,{color:"warning",label:"Cancel",onClick:F}),c(w,{color:"primary",label:"Save",disable:u(M).disable,onClick:Y},null,8,["disable"])])]),m("div",D,[m("div",N,[c(u(k),{loading:u(P).loadingBar.isActive,columns:B.value,rows:u(R).warehouseList,ref_key:"tblRef",ref:I},{"body-cell-action":d((({row:e,rowIndex:a})=>[c(p,null,{default:d((()=>[m("div",z,[c(w,{dense:"",round:"",color:"primary",icon:"info",onClick:l=>T(e,a)},null,8,["onClick"]),c(w,{dense:"",round:"",color:"warning",icon:"edit",onClick:l=>(async(e,a)=>{console.log(e),await T(e),M.index=a,M.isedit=!0,M.disable=!1,M.action="Edit"})(e,a)},null,8,["onClick"]),c(w,{dense:"",round:"",color:"negative",icon:"delete",onClick:a=>(async(e,a)=>{console.log(e),await T(e),M.action="Delete",P.dialog({title:"Confirm",message:"Yakin Delete?",cancel:!0,persistent:!0}).onOk((async()=>{await R.saveWarehouse(M)})).onCancel((()=>{})).onDismiss((()=>{F()}))})(e)},null,8,["onClick"])])])),_:2},1024)])),loading:d((()=>[c(y,{showing:"",color:"primary"})])),_:1},8,["loading","columns","rows"])])])])),_:1}))}});export{P as default};
