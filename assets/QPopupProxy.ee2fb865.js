import{d5 as e,d6 as t,c_ as a,d7 as n,d8 as o,c as r,br as l,cy as s,bP as u,bR as i,d9 as d,r as c,c$ as v,w as m,ap as f,h,b7 as y,bs as g,g as p,da as D,c4 as M,cF as w}from"./index.1921beeb.js";import{u as b,d as Y,i as _}from"./QSelect.00c3c8b7.js";const x=[-61,9,38,199,426,686,756,818,1111,1181,1210,1635,2060,2097,2192,2262,2324,2394,2456,3178];function S(e,t,a){return"[object Date]"===Object.prototype.toString.call(e)&&(a=e.getDate(),t=e.getMonth()+1,e=e.getFullYear()),function(e){const t=O(e).gy;let a,n,o,r=t-621;const l=$(r,!1),s=k(t,3,l.march);if(o=e-s,o>=0){if(o<=185)return n=1+j(o,31),a=T(o,31)+1,{jy:r,jm:n,jd:a};o-=186}else r-=1,o+=179,1===l.leap&&(o+=1);return n=7+j(o,30),a=T(o,30)+1,{jy:r,jm:n,jd:a}}(k(e,t,a))}function H(e,t,a){return O(function(e,t,a){const n=$(e,!0);return k(n.gy,3,n.march)+31*(t-1)-j(t,7)*(t-7)+a-1}(e,t,a))}function q(e){return 0===function(e){const t=x.length;let a,n,o,r,l,s=x[0];if(e<s||e>=x[t-1])throw new Error("Invalid Jalaali year "+e);for(l=1;l<t&&(a=x[l],n=a-s,!(e<a));l+=1)s=a;r=e-s,n-r<6&&(r=r-n+33*j(n+4,33));o=T(T(r+1,33)-1,4),-1===o&&(o=4);return o}(e)}function C(e,t){return t<=6?31:t<=11||q(e)?30:29}function $(e,t){const a=x.length,n=e+621;let o,r,l,s,u,i=-14,d=x[0];if(e<d||e>=x[a-1])throw new Error("Invalid Jalaali year "+e);for(u=1;u<a&&(o=x[u],r=o-d,!(e<o));u+=1)i=i+8*j(r,33)+j(T(r,33),4),d=o;s=e-d,i=i+8*j(s,33)+j(T(s,33)+3,4),4===T(r,33)&&r-s==4&&(i+=1);const c=20+i-(j(n,4)-j(3*(j(n,100)+1),4)-150);return t||(r-s<6&&(s=s-r+33*j(r+4,33)),l=T(T(s+1,33)-1,4),-1===l&&(l=4)),{leap:l,gy:n,march:c}}function k(e,t,a){let n=j(1461*(e+j(t-8,6)+100100),4)+j(153*T(t+9,12)+2,5)+a-34840408;return n=n-j(3*j(e+100100+j(t-8,6),100),4)+752,n}function O(e){let t=4*e+139361631;t=t+4*j(3*j(4*e+183187720,146097),4)-3908;const a=5*j(T(t,1461),4)+308,n=j(T(a,153),5)+1,o=T(j(a,153),12)+1;return{gy:j(t,1461)-100100+j(8-o,6),gm:o,gd:n}}function j(e,t){return~~(e/t)}function T(e,t){return e-~~(e/t)*t}const F=/\[((?:[^\]\\]|\\]|\\)*)\]|d{1,4}|M{1,4}|m{1,2}|w{1,2}|Qo|Do|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]/g,V=/(\[[^\]]*\])|d{1,4}|M{1,4}|m{1,2}|w{1,2}|Qo|Do|D{1,4}|YY(?:YY)?|H{1,2}|h{1,2}|s{1,2}|S{1,3}|Z{1,2}|a{1,2}|[AQExX]|([.*+:?^,\s${}()|\\]+)/g,I={};function Z(e,t){return void 0!==e?e:void 0!==t?t.date:n.date}function A(e,a=""){const n=e>0?"-":"+",o=Math.abs(e),r=Math.floor(o/60),l=o%60;return n+t(r)+a+t(l)}function B(e,t,a){const n=E(t),r=new Date(e),l=void 0!==n.year||void 0!==n.month||void 0!==n.date?function(e,t,a){let n=e.getFullYear(),o=e.getMonth();const r=e.getDate();return void 0!==t.year&&(n+=a*t.year,delete t.year),void 0!==t.month&&(o+=a*t.month,delete t.month),e.setDate(1),e.setMonth(2),e.setFullYear(n),e.setMonth(o),e.setDate(Math.min(r,L(e))),void 0!==t.date&&(e.setDate(e.getDate()+a*t.date),delete t.date),e}(r,n,a):r;for(const s in n){const e=o(s);l[`set${e}`](l[`get${e}`]()+a*n[s])}return l}function E(e){const t={...e};return void 0!==e.years&&(t.year=e.years,delete t.years),void 0!==e.months&&(t.month=e.months,delete t.months),void 0!==e.days&&(t.date=e.days,delete t.days),void 0!==e.day&&(t.date=e.day,delete t.day),void 0!==e.hour&&(t.hours=e.hour,delete t.hour),void 0!==e.minute&&(t.minutes=e.minute,delete t.minute),void 0!==e.second&&(t.seconds=e.second,delete t.second),void 0!==e.millisecond&&(t.milliseconds=e.millisecond,delete t.millisecond),t}function z(e,t,a){const n=E(t),o=!0===a?"UTC":"",r=new Date(e),l=void 0!==n.year||void 0!==n.month||void 0!==n.date?function(e,t,a){const n=void 0!==t.year?t.year:e[`get${a}FullYear`](),o=void 0!==t.month?t.month-1:e[`get${a}Month`](),r=new Date(n,o+1,0).getDate(),l=Math.min(r,void 0!==t.date?t.date:e[`get${a}Date`]());return e[`set${a}Date`](1),e[`set${a}Month`](2),e[`set${a}FullYear`](n),e[`set${a}Month`](o),e[`set${a}Date`](l),delete t.year,delete t.month,delete t.date,e}(r,n,o):r;for(const s in n){l[`set${o}${s.charAt(0).toUpperCase()+s.slice(1)}`](n[s])}return l}function N(a,n,o,r,l){const s={year:null,month:null,day:null,hour:null,minute:null,second:null,millisecond:null,timezoneOffset:null,dateHash:null,timeHash:null};if(void 0!==l&&Object.assign(s,l),null==a||""===a||"string"!=typeof a)return s;void 0===n&&(n="YYYY-MM-DDTHH:mm:ss.SSSZ");const u=Z(o,e.props),i=u.months,d=u.monthsShort,{regex:c,map:v}=function(e,t){const a="("+t.days.join("|")+")",n=e+a;if(void 0!==I[n])return I[n];const o="("+t.daysShort.join("|")+")",r="("+t.months.join("|")+")",l="("+t.monthsShort.join("|")+")",s={};let u=0;const i=e.replace(V,(e=>{switch(u++,e){case"YY":return s.YY=u,"(-?\\d{1,2})";case"YYYY":return s.YYYY=u,"(-?\\d{1,4})";case"M":return s.M=u,"(\\d{1,2})";case"MM":return s.M=u,"(\\d{2})";case"MMM":return s.MMM=u,l;case"MMMM":return s.MMMM=u,r;case"D":return s.D=u,"(\\d{1,2})";case"Do":return s.D=u++,"(\\d{1,2}(st|nd|rd|th))";case"DD":return s.D=u,"(\\d{2})";case"H":return s.H=u,"(\\d{1,2})";case"HH":return s.H=u,"(\\d{2})";case"h":return s.h=u,"(\\d{1,2})";case"hh":return s.h=u,"(\\d{2})";case"m":return s.m=u,"(\\d{1,2})";case"mm":return s.m=u,"(\\d{2})";case"s":return s.s=u,"(\\d{1,2})";case"ss":return s.s=u,"(\\d{2})";case"S":return s.S=u,"(\\d{1})";case"SS":return s.S=u,"(\\d{2})";case"SSS":return s.S=u,"(\\d{3})";case"A":return s.A=u,"(AM|PM)";case"a":return s.a=u,"(am|pm)";case"aa":return s.aa=u,"(a\\.m\\.|p\\.m\\.)";case"ddd":return o;case"dddd":return a;case"Q":case"d":case"E":return"(\\d{1})";case"Qo":return"(1st|2nd|3rd|4th)";case"DDD":case"DDDD":return"(\\d{1,3})";case"w":return"(\\d{1,2})";case"ww":return"(\\d{2})";case"Z":return s.Z=u,"(Z|[+-]\\d{2}:\\d{2})";case"ZZ":return s.ZZ=u,"(Z|[+-]\\d{2}\\d{2})";case"X":return s.X=u,"(-?\\d+)";case"x":return s.x=u,"(-?\\d{4,})";default:return u--,"["===e[0]&&(e=e.substring(1,e.length-1)),e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}})),d={map:s,regex:new RegExp("^"+i)};return I[n]=d,d}(n,u),m=a.match(c);if(null===m)return s;let f="";if(void 0!==v.X||void 0!==v.x){const e=parseInt(m[void 0!==v.X?v.X:v.x],10);if(!0===isNaN(e)||e<0)return s;const t=new Date(e*(void 0!==v.X?1e3:1));s.year=t.getFullYear(),s.month=t.getMonth()+1,s.day=t.getDate(),s.hour=t.getHours(),s.minute=t.getMinutes(),s.second=t.getSeconds(),s.millisecond=t.getMilliseconds()}else{if(void 0!==v.YYYY)s.year=parseInt(m[v.YYYY],10);else if(void 0!==v.YY){const e=parseInt(m[v.YY],10);s.year=e<0?e:2e3+e}if(void 0!==v.M){if(s.month=parseInt(m[v.M],10),s.month<1||s.month>12)return s}else void 0!==v.MMM?s.month=d.indexOf(m[v.MMM])+1:void 0!==v.MMMM&&(s.month=i.indexOf(m[v.MMMM])+1);if(void 0!==v.D){if(s.day=parseInt(m[v.D],10),null===s.year||null===s.month||s.day<1)return s;const e="persian"!==r?new Date(s.year,s.month,0).getDate():C(s.year,s.month);if(s.day>e)return s}void 0!==v.H?s.hour=parseInt(m[v.H],10)%24:void 0!==v.h&&(s.hour=parseInt(m[v.h],10)%12,(v.A&&"PM"===m[v.A]||v.a&&"pm"===m[v.a]||v.aa&&"p.m."===m[v.aa])&&(s.hour+=12),s.hour=s.hour%24),void 0!==v.m&&(s.minute=parseInt(m[v.m],10)%60),void 0!==v.s&&(s.second=parseInt(m[v.s],10)%60),void 0!==v.S&&(s.millisecond=parseInt(m[v.S],10)*10**(3-m[v.S].length)),void 0===v.Z&&void 0===v.ZZ||(f=void 0!==v.Z?m[v.Z].replace(":",""):m[v.ZZ],s.timezoneOffset=("+"===f[0]?-1:1)*(60*f.slice(1,3)+1*f.slice(3,5)))}return s.dateHash=t(s.year,6)+"/"+t(s.month)+"/"+t(s.day),s.timeHash=t(s.hour)+":"+t(s.minute)+":"+t(s.second)+f,s}function Q(e){const t=new Date(e.getFullYear(),e.getMonth(),e.getDate());t.setDate(t.getDate()-(t.getDay()+6)%7+3);const a=new Date(t.getFullYear(),0,4);a.setDate(a.getDate()-(a.getDay()+6)%7+3);const n=t.getTimezoneOffset()-a.getTimezoneOffset();t.setHours(t.getHours()-n);const o=(t-a)/6048e5;return 1+Math.floor(o)}function R(e,t){const a=new Date(e);return!0===t?function(e){return 1e4*e.getFullYear()+100*e.getMonth()+e.getDate()}(a):a.getTime()}function X(e,t,a){const n=new Date(e),o="set"+(!0===a?"UTC":"");switch(t){case"year":case"years":n[`${o}Month`](0);case"month":case"months":n[`${o}Date`](1);case"day":case"days":case"date":n[`${o}Hours`](0);case"hour":case"hours":n[`${o}Minutes`](0);case"minute":case"minutes":n[`${o}Seconds`](0);case"second":case"seconds":n[`${o}Milliseconds`](0)}return n}function P(e,t,a){return(e.getTime()-6e4*e.getTimezoneOffset()-(t.getTime()-6e4*t.getTimezoneOffset()))/a}function U(e,t,a="days"){const n=new Date(e),o=new Date(t);switch(a){case"years":case"year":return n.getFullYear()-o.getFullYear();case"months":case"month":return 12*(n.getFullYear()-o.getFullYear())+n.getMonth()-o.getMonth();case"days":case"day":case"date":return P(X(n,"day"),X(o,"day"),864e5);case"hours":case"hour":return P(X(n,"hour"),X(o,"hour"),36e5);case"minutes":case"minute":return P(X(n,"minute"),X(o,"minute"),6e4);case"seconds":case"second":return P(X(n,"second"),X(o,"second"),1e3)}}function W(e){return U(e,X(e,"year"),"days")+1}function L(e){return new Date(e.getFullYear(),e.getMonth()+1,0).getDate()}function J(e){if(e>=11&&e<=13)return`${e}th`;switch(e%10){case 1:return`${e}st`;case 2:return`${e}nd`;case 3:return`${e}rd`}return`${e}th`}const K={YY(e,a,n){const o=this.YYYY(e,a,n)%100;return o>=0?t(o):"-"+t(Math.abs(o))},YYYY:(e,t,a)=>null!=a?a:e.getFullYear(),M:e=>e.getMonth()+1,MM:e=>t(e.getMonth()+1),MMM:(e,t)=>t.monthsShort[e.getMonth()],MMMM:(e,t)=>t.months[e.getMonth()],Q:e=>Math.ceil((e.getMonth()+1)/3),Qo(e){return J(this.Q(e))},D:e=>e.getDate(),Do:e=>J(e.getDate()),DD:e=>t(e.getDate()),DDD:e=>W(e),DDDD:e=>t(W(e),3),d:e=>e.getDay(),dd(e,t){return this.dddd(e,t).slice(0,2)},ddd:(e,t)=>t.daysShort[e.getDay()],dddd:(e,t)=>t.days[e.getDay()],E:e=>e.getDay()||7,w:e=>Q(e),ww:e=>t(Q(e)),H:e=>e.getHours(),HH:e=>t(e.getHours()),h(e){const t=e.getHours();return 0===t?12:t>12?t%12:t},hh(e){return t(this.h(e))},m:e=>e.getMinutes(),mm:e=>t(e.getMinutes()),s:e=>e.getSeconds(),ss:e=>t(e.getSeconds()),S:e=>Math.floor(e.getMilliseconds()/100),SS:e=>t(Math.floor(e.getMilliseconds()/10)),SSS:e=>t(e.getMilliseconds(),3),A(e){return this.H(e)<12?"AM":"PM"},a(e){return this.H(e)<12?"am":"pm"},aa(e){return this.H(e)<12?"a.m.":"p.m."},Z:(e,t,a,n)=>A(null==n?e.getTimezoneOffset():n,":"),ZZ:(e,t,a,n)=>A(null==n?e.getTimezoneOffset():n),X:e=>Math.floor(e.getTime()/1e3),x:e=>e.getTime()};function G(t,a,n,o,r){if(0!==t&&!t||t===1/0||t===-1/0)return;const l=new Date(t);if(isNaN(l))return;void 0===a&&(a="YYYY-MM-DDTHH:mm:ss.SSSZ");const s=Z(n,e.props);return a.replace(F,((e,t)=>e in K?K[e](l,s,o,r):void 0===t?e:t.split("\\]").join("]")))}var ee={isValid:function(e){return"number"==typeof e||!1===isNaN(Date.parse(e))},extractDate:function(e,t,a){const n=N(e,t,a),o=new Date(n.year,null===n.month?null:n.month-1,null===n.day?1:n.day,n.hour,n.minute,n.second,n.millisecond),r=o.getTimezoneOffset();return null===n.timezoneOffset||n.timezoneOffset===r?o:B(o,{minutes:n.timezoneOffset-r},1)},buildDate:function(e,t){return z(new Date,e,t)},getDayOfWeek:function(e){const t=new Date(e).getDay();return 0===t?7:t},getWeekOfYear:Q,isBetweenDates:function(e,t,a,n={}){const o=R(t,n.onlyDate),r=R(a,n.onlyDate),l=R(e,n.onlyDate);return(l>o||!0===n.inclusiveFrom&&l===o)&&(l<r||!0===n.inclusiveTo&&l===r)},addToDate:function(e,t){return B(e,t,1)},subtractFromDate:function(e,t){return B(e,t,-1)},adjustDate:z,startOfDate:X,endOfDate:function(e,t,a){const n=new Date(e),o="set"+(!0===a?"UTC":"");switch(t){case"year":case"years":n[`${o}Month`](11);case"month":case"months":n[`${o}Date`](L(n));case"day":case"days":case"date":n[`${o}Hours`](23);case"hour":case"hours":n[`${o}Minutes`](59);case"minute":case"minutes":n[`${o}Seconds`](59);case"second":case"seconds":n[`${o}Milliseconds`](999)}return n},getMaxDate:function(e){let t=new Date(e);return Array.prototype.slice.call(arguments,1).forEach((e=>{t=Math.max(t,new Date(e))})),t},getMinDate:function(e){let t=new Date(e);return Array.prototype.slice.call(arguments,1).forEach((e=>{t=Math.min(t,new Date(e))})),t},getDateDiff:U,getDayOfYear:W,inferDateFormat:function(e){return!0===a(e)?"date":"number"==typeof e?"number":"string"},getDateBetween:function(e,t,a){const n=new Date(e);if(t){const e=new Date(t);if(n<e)return e}if(a){const e=new Date(a);if(n>e)return e}return n},isSameDate:function(e,t,a){const n=new Date(e),o=new Date(t);if(void 0===a)return n.getTime()===o.getTime();switch(a){case"second":case"seconds":if(n.getSeconds()!==o.getSeconds())return!1;case"minute":case"minutes":if(n.getMinutes()!==o.getMinutes())return!1;case"hour":case"hours":if(n.getHours()!==o.getHours())return!1;case"day":case"days":case"date":if(n.getDate()!==o.getDate())return!1;case"month":case"months":if(n.getMonth()!==o.getMonth())return!1;case"year":case"years":if(n.getFullYear()!==o.getFullYear())return!1;break;default:throw new Error(`date isSameDate unknown unit ${a}`)}return!0},daysInMonth:L,formatDate:G,clone:function(e){return!0===a(e)?new Date(e.getTime()):e}};const te=["gregorian","persian"],ae={modelValue:{required:!0},mask:{type:String},locale:Object,calendar:{type:String,validator:e=>te.includes(e),default:"gregorian"},landscape:Boolean,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,readonly:Boolean,disable:Boolean};function ne(e){return e.year+"/"+t(e.month)+"/"+t(e.day)}const oe=["Calendar","Years","Months"],re=e=>oe.includes(e),le=e=>/^-?[\d]+\/[0-1]\d$/.test(e);function se(e){return e.year+"/"+t(e.month)}var ue=l({name:"QDate",props:{...ae,...s,...u,multiple:Boolean,range:Boolean,title:String,subtitle:String,mask:{default:"YYYY/MM/DD"},defaultYearMonth:{type:String,validator:le},yearsInMonthView:Boolean,events:[Array,Function],eventColor:[String,Function],emitImmediately:Boolean,options:[Array,Function],navigationMinYearMonth:{type:String,validator:le},navigationMaxYearMonth:{type:String,validator:le},noUnset:Boolean,firstDayOfWeek:[String,Number],todayBtn:Boolean,minimal:Boolean,defaultView:{type:String,default:"Calendar",validator:re}},emits:["update:modelValue","range-start","range-end","navigation"],setup(e,{slots:a,emit:n}){const{proxy:o}=p(),{$q:l}=o,s=i(e,l),{getCache:u}=function(){const e=new Map;return{getCache:function(t,a){return void 0===e[t]?e[t]=a:e[t]},getCacheWithFn:function(t,a){return void 0===e[t]?e[t]=a():e[t]}}}(),{tabindex:w,headerClass:b,getLocale:Y,getCurrentDate:_}=function(e,t){return{editable:r((()=>!0!==e.disable&&!0!==e.readonly)),tabindex:r((()=>!0===e.editable?0:-1)),headerClass:r((()=>{const t=[];return void 0!==e.color&&t.push(`bg-${e.color}`),void 0!==e.textColor&&t.push(`text-${e.textColor}`),t.join(" ")})),getLocale:function(){return void 0!==e.locale?{...t.lang.date,...e.locale}:t.lang.date},getCurrentDate:function(t){const a=new Date,n=!0===t?null:0;if("persian"===e.calendar){const e=S(a);return{year:e.jy,month:e.jm,day:e.jd}}return{year:a.getFullYear(),month:a.getMonth()+1,day:a.getDate(),hour:n,minute:n,second:n,millisecond:n}}}}(e,l);let x;const q=d(e),$=D(q),k=c(null),O=c($e()),j=c(Y()),T=r((()=>$e())),F=r((()=>Y())),V=r((()=>_())),I=c(Oe(O.value,j.value)),Z=c(e.defaultView),A=!0===l.lang.rtl?"right":"left",B=c(A.value),E=c(A.value),z=I.value.year,Q=c(z-z%20-(z<0?20:0)),R=c(null),X=r((()=>{const t=!0===e.landscape?"landscape":"portrait";return`q-date q-date--${t} q-date--${t}-${!0===e.minimal?"minimal":"standard"}`+(!0===s.value?" q-date--dark q-dark":"")+(!0===e.bordered?" q-date--bordered":"")+(!0===e.square?" q-date--square no-border-radius":"")+(!0===e.flat?" q-date--flat no-shadow":"")+(!0===e.disable?" disabled":!0===e.readonly?" q-date--readonly":"")})),P=r((()=>e.color||"primary")),W=r((()=>e.textColor||"white")),L=r((()=>!0===e.emitImmediately&&!0!==e.multiple&&!0!==e.range)),J=r((()=>!0===Array.isArray(e.modelValue)?e.modelValue:null!==e.modelValue&&void 0!==e.modelValue?[e.modelValue]:[])),K=r((()=>J.value.filter((e=>"string"==typeof e)).map((e=>ke(e,O.value,j.value))).filter((e=>null!==e.dateHash&&null!==e.day&&null!==e.month&&null!==e.year)))),ee=r((()=>{const e=e=>ke(e,O.value,j.value);return J.value.filter((e=>!0===v(e)&&void 0!==e.from&&void 0!==e.to)).map((t=>({from:e(t.from),to:e(t.to)}))).filter((e=>null!==e.from.dateHash&&null!==e.to.dateHash&&e.from.dateHash<e.to.dateHash))})),te=r((()=>"persian"!==e.calendar?e=>new Date(e.year,e.month-1,e.day):e=>{const t=H(e.year,e.month,e.day);return new Date(t.gy,t.gm-1,t.gd)})),ae=r((()=>"persian"===e.calendar?ne:(e,t,a)=>G(new Date(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond),void 0===t?O.value:t,void 0===a?j.value:a,e.year,e.timezoneOffset))),oe=r((()=>K.value.length+ee.value.reduce(((e,t)=>e+1+U(te.value(t.to),te.value(t.from))),0))),le=r((()=>{if(void 0!==e.title&&null!==e.title&&e.title.length>0)return e.title;if(null!==R.value){const e=R.value.init,t=te.value(e);return j.value.daysShort[t.getDay()]+", "+j.value.monthsShort[e.month-1]+" "+e.day+" — ?"}if(0===oe.value)return" — ";if(oe.value>1)return`${oe.value} ${j.value.pluralDay}`;const t=K.value[0],a=te.value(t);return!0===isNaN(a.valueOf())?" — ":void 0!==j.value.headerTitle?j.value.headerTitle(a,t):j.value.daysShort[a.getDay()]+", "+j.value.monthsShort[t.month-1]+" "+t.day})),ue=r((()=>K.value.concat(ee.value.map((e=>e.from))).sort(((e,t)=>e.year-t.year||e.month-t.month))[0])),ie=r((()=>K.value.concat(ee.value.map((e=>e.to))).sort(((e,t)=>t.year-e.year||t.month-e.month))[0])),de=r((()=>{if(void 0!==e.subtitle&&null!==e.subtitle&&e.subtitle.length>0)return e.subtitle;if(0===oe.value)return" — ";if(oe.value>1){const e=ue.value,t=ie.value,a=j.value.monthsShort;return a[e.month-1]+(e.year!==t.year?" "+e.year+" — "+a[t.month-1]+" ":e.month!==t.month?" — "+a[t.month-1]:"")+" "+t.year}return K.value[0].year})),ce=r((()=>{const e=[l.iconSet.datetime.arrowLeft,l.iconSet.datetime.arrowRight];return!0===l.lang.rtl?e.reverse():e})),ve=r((()=>void 0!==e.firstDayOfWeek?Number(e.firstDayOfWeek):j.value.firstDayOfWeek)),me=r((()=>{const e=j.value.daysShort,t=ve.value;return t>0?e.slice(t,7).concat(e.slice(0,t)):e})),fe=r((()=>{const t=I.value;return"persian"!==e.calendar?new Date(t.year,t.month,0).getDate():C(t.year,t.month)})),he=r((()=>"function"==typeof e.eventColor?e.eventColor:()=>e.eventColor)),ye=r((()=>{if(void 0===e.navigationMinYearMonth)return null;const t=e.navigationMinYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}})),ge=r((()=>{if(void 0===e.navigationMaxYearMonth)return null;const t=e.navigationMaxYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}})),pe=r((()=>{const e={month:{prev:!0,next:!0},year:{prev:!0,next:!0}};return null!==ye.value&&ye.value.year>=I.value.year&&(e.year.prev=!1,ye.value.year===I.value.year&&ye.value.month>=I.value.month&&(e.month.prev=!1)),null!==ge.value&&ge.value.year<=I.value.year&&(e.year.next=!1,ge.value.year===I.value.year&&ge.value.month<=I.value.month&&(e.month.next=!1)),e})),De=r((()=>{const e={};return K.value.forEach((t=>{const a=se(t);void 0===e[a]&&(e[a]=[]),e[a].push(t.day)})),e})),Me=r((()=>{const e={};return ee.value.forEach((t=>{const a=se(t.from),n=se(t.to);if(void 0===e[a]&&(e[a]=[]),e[a].push({from:t.from.day,to:a===n?t.to.day:void 0,range:t}),a<n){let a;const{year:o,month:r}=t.from,l=r<12?{year:o,month:r+1}:{year:o+1,month:1};for(;(a=se(l))<=n;)void 0===e[a]&&(e[a]=[]),e[a].push({from:void 0,to:a===n?t.to.day:void 0,range:t}),l.month++,l.month>12&&(l.year++,l.month=1)}})),e})),we=r((()=>{if(null===R.value)return;const{init:e,initHash:t,final:a,finalHash:n}=R.value,[o,r]=t<=n?[e,a]:[a,e],l=se(o),s=se(r);if(l!==be.value&&s!==be.value)return;const u={};return l===be.value?(u.from=o.day,u.includeFrom=!0):u.from=1,s===be.value?(u.to=r.day,u.includeTo=!0):u.to=fe.value,u})),be=r((()=>se(I.value))),Ye=r((()=>{const a={};if(void 0===e.options){for(let e=1;e<=fe.value;e++)a[e]=!0;return a}const n="function"==typeof e.options?e.options:t=>e.options.includes(t);for(let e=1;e<=fe.value;e++){const o=be.value+"/"+t(e);a[e]=n(o)}return a})),_e=r((()=>{const a={};if(void 0===e.events)for(let e=1;e<=fe.value;e++)a[e]=!1;else{const n="function"==typeof e.events?e.events:t=>e.events.includes(t);for(let e=1;e<=fe.value;e++){const o=be.value+"/"+t(e);a[e]=!0===n(o)&&he.value(o)}}return a})),xe=r((()=>{let t,a;const{year:n,month:o}=I.value;if("persian"!==e.calendar)t=new Date(n,o-1,1),a=new Date(n,o-1,0).getDate();else{const e=H(n,o,1);t=new Date(e.gy,e.gm-1,e.gd);let r=o-1,l=n;0===r&&(r=12,l--),a=C(l,r)}return{days:t.getDay()-ve.value-1,endDay:a}})),Se=r((()=>{const e=[],{days:t,endDay:a}=xe.value,n=t<0?t+7:t;if(n<6)for(let l=a-n;l<=a;l++)e.push({i:l,fill:!0});const o=e.length;for(let l=1;l<=fe.value;l++){const t={i:l,event:_e.value[l],classes:[]};!0===Ye.value[l]&&(t.in=!0,t.flat=!0),e.push(t)}if(void 0!==De.value[be.value]&&De.value[be.value].forEach((t=>{const a=o+t-1;Object.assign(e[a],{selected:!0,unelevated:!0,flat:!1,color:P.value,textColor:W.value})})),void 0!==Me.value[be.value]&&Me.value[be.value].forEach((t=>{if(void 0!==t.from){const a=o+t.from-1,n=o+(t.to||fe.value)-1;for(let o=a;o<=n;o++)Object.assign(e[o],{range:t.range,unelevated:!0,color:P.value,textColor:W.value});Object.assign(e[a],{rangeFrom:!0,flat:!1}),void 0!==t.to&&Object.assign(e[n],{rangeTo:!0,flat:!1})}else if(void 0!==t.to){const a=o+t.to-1;for(let n=o;n<=a;n++)Object.assign(e[n],{range:t.range,unelevated:!0,color:P.value,textColor:W.value});Object.assign(e[a],{flat:!1,rangeTo:!0})}else{const a=o+fe.value-1;for(let n=o;n<=a;n++)Object.assign(e[n],{range:t.range,unelevated:!0,color:P.value,textColor:W.value})}})),void 0!==we.value){const t=o+we.value.from-1,a=o+we.value.to-1;for(let n=t;n<=a;n++)e[n].color=P.value,e[n].editRange=!0;!0===we.value.includeFrom&&(e[t].editRangeFrom=!0),!0===we.value.includeTo&&(e[a].editRangeTo=!0)}I.value.year===V.value.year&&I.value.month===V.value.month&&(e[o+V.value.day-1].today=!0);const r=e.length%7;if(r>0){const t=7-r;for(let a=1;a<=t;a++)e.push({i:a,fill:!0})}return e.forEach((e=>{let t="q-date__calendar-item ";!0===e.fill?t+="q-date__calendar-item--fill":(t+="q-date__calendar-item--"+(!0===e.in?"in":"out"),void 0!==e.range&&(t+=" q-date__range"+(!0===e.rangeTo?"-to":!0===e.rangeFrom?"-from":"")),!0===e.editRange&&(t+=` q-date__edit-range${!0===e.editRangeFrom?"-from":""}${!0===e.editRangeTo?"-to":""}`),void 0===e.range&&!0!==e.editRange||(t+=` text-${e.color}`)),e.classes=t})),e})),He=r((()=>!0===e.disable?{"aria-disabled":"true"}:!0===e.readonly?{"aria-readonly":"true"}:{}));function qe(){const e=V.value,t=De.value[se(e)];void 0!==t&&!1!==t.includes(e.day)||ze(e),Ce(e.year,e.month)}function Ce(e,t){Z.value="Calendar",Ie(e,t)}function $e(){return"persian"===e.calendar?"YYYY/MM/DD":e.mask}function ke(t,a,n){return N(t,a,n,e.calendar,{hour:0,minute:0,second:0,millisecond:0})}function Oe(t,a){const n=!0===Array.isArray(e.modelValue)?e.modelValue:e.modelValue?[e.modelValue]:[];if(0===n.length)return je();const o=n[n.length-1],r=ke(void 0!==o.from?o.from:o,t,a);return null===r.dateHash?je():r}function je(){let a,n;if(void 0!==e.defaultYearMonth){const t=e.defaultYearMonth.split("/");a=parseInt(t[0],10),n=parseInt(t[1],10)}else{const e=void 0!==V.value?V.value:_();a=e.year,n=e.month}return{year:a,month:n,day:1,hour:0,minute:0,second:0,millisecond:0,dateHash:a+"/"+t(n)+"/01"}}function Te(e){let t=I.value.year,a=Number(I.value.month)+e;13===a?(a=1,t++):0===a&&(a=12,t--),Ie(t,a),!0===L.value&&Ae("month")}function Fe(e){Ie(Number(I.value.year)+e,I.value.month),!0===L.value&&Ae("year")}function Ve(e){return{year:e.year,month:e.month,day:e.day}}function Ie(e,a){null!==ye.value&&e<=ye.value.year&&(e=ye.value.year,a<ye.value.month&&(a=ye.value.month)),null!==ge.value&&e>=ge.value.year&&(e=ge.value.year,a>ge.value.month&&(a=ge.value.month));const n=e+"/"+t(a)+"/01";n!==I.value.dateHash&&(B.value=I.value.dateHash<n==(!0!==l.lang.rtl)?"left":"right",e!==I.value.year&&(E.value=B.value),f((()=>{Q.value=e-e%20-(e<0?20:0),Object.assign(I.value,{year:e,month:a,day:1,dateHash:n})})))}function Ze(t,a,o){const r=null!==t&&1===t.length&&!1===e.multiple?t[0]:t;x=r;const{reason:l,details:s}=Be(a,o);n("update:modelValue",r,l,s)}function Ae(t){const a=void 0!==K.value[0]&&null!==K.value[0].dateHash?{...K.value[0]}:{...I.value};f((()=>{a.year=I.value.year,a.month=I.value.month;const o="persian"!==e.calendar?new Date(a.year,a.month,0).getDate():C(a.year,a.month);a.day=Math.min(Math.max(1,a.day),o);const r=Ee(a);x=r;const{details:l}=Be("",a);n("update:modelValue",r,t,l)}))}function Be(e,t){return void 0!==t.from?{reason:`${e}-range`,details:{...Ve(t.target),from:Ve(t.from),to:Ve(t.to)}}:{reason:`${e}-day`,details:Ve(t)}}function Ee(e,t,a){return void 0!==e.from?{from:ae.value(e.from,t,a),to:ae.value(e.to,t,a)}:ae.value(e,t,a)}function ze(t){let a;if(!0===e.multiple)if(void 0!==t.from){const e=ne(t.from),n=ne(t.to),o=K.value.filter((t=>t.dateHash<e||t.dateHash>n)),r=ee.value.filter((({from:t,to:a})=>a.dateHash<e||t.dateHash>n));a=o.concat(r).concat(t).map((e=>Ee(e)))}else{const e=J.value.slice();e.push(Ee(t)),a=e}else a=Ee(t);Ze(a,"add",t)}function Ne(t){if(!0===e.noUnset)return;let a=null;if(!0===e.multiple&&!0===Array.isArray(e.modelValue)){const n=Ee(t);a=void 0!==t.from?e.modelValue.filter((e=>void 0===e.from||e.from!==n.from&&e.to!==n.to)):e.modelValue.filter((e=>e!==n)),0===a.length&&(a=null)}Ze(a,"remove",t)}function Qe(t,a,o){const r=K.value.concat(ee.value).map((e=>Ee(e,t,a))).filter((e=>void 0!==e.from?null!==e.from.dateHash&&null!==e.to.dateHash:null!==e.dateHash));n("update:modelValue",(!0===e.multiple?r:r[0])||null,o)}function Re(){if(!0!==e.minimal)return h("div",{class:"q-date__header "+b.value},[h("div",{class:"relative-position"},[h(y,{name:"q-transition--fade"},(()=>h("div",{key:"h-yr-"+de.value,class:"q-date__header-subtitle q-date__header-link "+("Years"===Z.value?"q-date__header-link--active":"cursor-pointer"),tabindex:w.value,...u("vY",{onClick(){Z.value="Years"},onKeyup(e){13===e.keyCode&&(Z.value="Years")}})},[de.value])))]),h("div",{class:"q-date__header-title relative-position flex no-wrap"},[h("div",{class:"relative-position col"},[h(y,{name:"q-transition--fade"},(()=>h("div",{key:"h-sub"+le.value,class:"q-date__header-title-label q-date__header-link "+("Calendar"===Z.value?"q-date__header-link--active":"cursor-pointer"),tabindex:w.value,...u("vC",{onClick(){Z.value="Calendar"},onKeyup(e){13===e.keyCode&&(Z.value="Calendar")}})},[le.value])))]),!0===e.todayBtn?h(M,{class:"q-date__header-today self-start",icon:l.iconSet.datetime.today,flat:!0,size:"sm",round:!0,tabindex:w.value,onClick:qe}):null])])}function Xe({label:e,type:t,key:a,dir:n,goTo:o,boundaries:r,cls:l}){return[h("div",{class:"row items-center q-date__arrow"},[h(M,{round:!0,dense:!0,size:"sm",flat:!0,icon:ce.value[0],tabindex:w.value,disable:!1===r.prev,...u("go-#"+t,{onClick(){o(-1)}})})]),h("div",{class:"relative-position overflow-hidden flex flex-center"+l},[h(y,{name:"q-transition--jump-"+n},(()=>h("div",{key:a},[h(M,{flat:!0,dense:!0,noCaps:!0,label:e,tabindex:w.value,...u("view#"+t,{onClick:()=>{Z.value=t}})})])))]),h("div",{class:"row items-center q-date__arrow"},[h(M,{round:!0,dense:!0,size:"sm",flat:!0,icon:ce.value[1],tabindex:w.value,disable:!1===r.next,...u("go+#"+t,{onClick(){o(1)}})})])]}m((()=>e.modelValue),(e=>{if(x===e)x=0;else{const{year:e,month:t}=Oe(O.value,j.value);Ie(e,t)}})),m(Z,(()=>{null!==k.value&&k.value.focus()})),m((()=>I.value.year),(e=>{n("navigation",{year:e,month:I.value.month})})),m((()=>I.value.month),(e=>{n("navigation",{year:I.value.year,month:e})})),m(T,(e=>{Qe(e,j.value,"mask"),O.value=e})),m(F,(e=>{Qe(O.value,e,"locale"),j.value=e}));const Pe={Calendar:()=>[h("div",{key:"calendar-view",class:"q-date__view q-date__calendar"},[h("div",{class:"q-date__navigation row items-center no-wrap"},Xe({label:j.value.months[I.value.month-1],type:"Months",key:I.value.month,dir:B.value,goTo:Te,boundaries:pe.value.month,cls:" col"}).concat(Xe({label:I.value.year,type:"Years",key:I.value.year,dir:E.value,goTo:Fe,boundaries:pe.value.year,cls:""}))),h("div",{class:"q-date__calendar-weekdays row items-center no-wrap"},me.value.map((e=>h("div",{class:"q-date__calendar-item"},[h("div",e)])))),h("div",{class:"q-date__calendar-days-container relative-position overflow-hidden"},[h(y,{name:"q-transition--slide-"+B.value},(()=>h("div",{key:be.value,class:"q-date__calendar-days fit"},Se.value.map((t=>h("div",{class:t.classes},[!0===t.in?h(M,{class:!0===t.today?"q-date__today":"",dense:!0,flat:t.flat,unelevated:t.unelevated,color:t.color,textColor:t.textColor,label:t.i,tabindex:w.value,...u("day#"+t.i,{onClick:()=>{!function(t){const a={...I.value,day:t};if(!1===e.range)return void function(e,t){const a=De.value[t];(void 0!==a&&!0===a.includes(e.day)?Ne:ze)(e)}(a,be.value);if(null===R.value){const o=Se.value.find((e=>!0!==e.fill&&e.i===t));if(!0!==e.noUnset&&void 0!==o.range)return void Ne({target:a,from:o.range.from,to:o.range.to});if(!0===o.selected)return void Ne(a);const r=ne(a);R.value={init:a,initHash:r,final:a,finalHash:r},n("range-start",Ve(a))}else{const e=R.value.initHash,t=ne(a),o=e<=t?{from:R.value.init,to:a}:{from:a,to:R.value.init};R.value=null,ze(e===t?a:{target:a,...o}),n("range-end",{from:Ve(o.from),to:Ve(o.to)})}}(t.i)},onMouseover:()=>{!function(e){if(null!==R.value){const t={...I.value,day:e};Object.assign(R.value,{final:t,finalHash:ne(t)})}}(t.i)}})},!1!==t.event?()=>h("div",{class:"q-date__event bg-"+t.event}):null):h("div",""+t.i)]))))))])])],Months(){const t=I.value.year===V.value.year,a=e=>null!==ye.value&&I.value.year===ye.value.year&&ye.value.month>e||null!==ge.value&&I.value.year===ge.value.year&&ge.value.month<e,n=j.value.monthsShort.map(((e,n)=>{const o=I.value.month===n+1;return h("div",{class:"q-date__months-item flex flex-center"},[h(M,{class:!0===t&&V.value.month===n+1?"q-date__today":null,flat:!0!==o,label:e,unelevated:o,color:!0===o?P.value:null,textColor:!0===o?W.value:null,tabindex:w.value,disable:a(n+1),...u("month#"+n,{onClick:()=>{!function(e){Ie(I.value.year,e),Z.value="Calendar",!0===L.value&&Ae("month")}(n+1)}})})])}));return!0===e.yearsInMonthView&&n.unshift(h("div",{class:"row no-wrap full-width"},[Xe({label:I.value.year,type:"Years",key:I.value.year,dir:E.value,goTo:Fe,boundaries:pe.value.year,cls:" col"})])),h("div",{key:"months-view",class:"q-date__view q-date__months flex flex-center"},n)},Years(){const t=Q.value,a=t+20,n=[],o=e=>null!==ye.value&&ye.value.year>e||null!==ge.value&&ge.value.year<e;for(let r=t;r<=a;r++){const t=I.value.year===r;n.push(h("div",{class:"q-date__years-item flex flex-center"},[h(M,{key:"yr"+r,class:V.value.year===r?"q-date__today":null,flat:!t,label:r,dense:!0,unelevated:t,color:!0===t?P.value:null,textColor:!0===t?W.value:null,tabindex:w.value,disable:o(r),...u("yr#"+r,{onClick:()=>{Ie(r,I.value.month),Z.value="Years"===e.defaultView?"Months":"Calendar",!0===L.value&&Ae("year")}})})]))}return h("div",{class:"q-date__view q-date__years flex flex-center"},[h("div",{class:"col-auto"},[h(M,{round:!0,dense:!0,flat:!0,icon:ce.value[0],tabindex:w.value,disable:o(t),...u("y-",{onClick:()=>{Q.value-=20}})})]),h("div",{class:"q-date__years-content col self-stretch row items-center"},n),h("div",{class:"col-auto"},[h(M,{round:!0,dense:!0,flat:!0,icon:ce.value[1],tabindex:w.value,disable:o(a),...u("y+",{onClick:()=>{Q.value+=20}})})])])}};return Object.assign(o,{setToday:qe,setView:function(e){!0===re(e)&&(Z.value=e)},offsetCalendar:function(e,t){if(["month","year"].includes(e)){("month"===e?Te:Fe)(!0===t?-1:1)}},setCalendarTo:Ce,setEditingRange:function(t,a){if(!1===e.range||!t)return void(R.value=null);const n=Object.assign({...I.value},t),o=void 0!==a?Object.assign({...I.value},a):n;R.value={init:n,initHash:ne(n),final:o,finalHash:ne(o)},Ce(n.year,n.month)}}),()=>{const t=[h("div",{class:"q-date__content col relative-position"},[h(y,{name:"q-transition--fade"},Pe[Z.value])])],n=g(a.default);return void 0!==n&&t.push(h("div",{class:"q-date__actions"},n)),void 0!==e.name&&!0!==e.disable&&$(t,"push"),h("div",{class:X.value,...He.value},[Re(),h("div",{ref:k,class:"q-date__main col column",tabindex:-1},t)])}}}),ie=l({name:"QPopupProxy",props:{...b,breakpoint:{type:[String,Number],default:450}},emits:["show","hide"],setup(e,{slots:t,emit:a,attrs:n}){const{proxy:o}=p(),{$q:l}=o,s=c(!1),u=c(null),i=r((()=>parseInt(e.breakpoint,10))),{canShow:d}=Y({showing:s});function v(){return l.screen.width<i.value||l.screen.height<i.value?"dialog":"menu"}const f=c(v()),y=r((()=>"menu"===f.value?{maxHeight:"99vh"}:{}));function g(e){s.value=!0,a("show",e)}function D(e){s.value=!1,f.value=v(),a("hide",e)}return m((()=>v()),(e=>{!0!==s.value&&(f.value=e)})),Object.assign(o,{show(e){!0===d(e)&&u.value.show(e)},hide(e){u.value.hide(e)},toggle(e){u.value.toggle(e)}}),()=>{const a={ref:u,...y.value,...n,onShow:g,onHide:D};let o;return"dialog"===f.value?o=w:(o=_,Object.assign(a,{target:e.target,contextMenu:e.contextMenu,noParentEvent:!0,separateClosePopup:!0})),h(o,a,t.default)}}});export{ie as Q,ue as a,ee as d};
