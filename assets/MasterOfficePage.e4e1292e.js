import{j as e,ca as l,r as o,x as a,aA as i,a1 as s,b2 as c,d,J as n,cJ as t,a4 as f,cb as r,c4 as u}from"./index.1921beeb.js";import{Q as m}from"./QBadge.2b2d9dcd.js";import{Q as b,a as g}from"./QTd.14f40a51.js";import{Q as p}from"./QPage.a28e4bed.js";import{c as v}from"./index.229e2d0a.js";import{u as y,t as w,Q as j}from"./module-master.be57f47e.js";import{u as k}from"./myglobalstate.9e951e82.js";import"./QList.0ff0e2c9.js";import"./QSelect.00c3c8b7.js";import"./QItemLabel.ed81b066.js";const C={class:"row q-mb-md q-col-gutter-xs"},x={class:"col-6"},O={class:"col-6"},Q={class:"row q-mb-md justify-between"},q={class:"q-gutter-xs"},_={class:"q-gutter-xs"},A={class:"row"},D={class:"col-12"},V={class:"row self-center content-center justify-center q-gutter-xs"},J=e({__name:"MasterOfficePage",setup(e){const J=l(),S=y();k().title="Master Office";const h=JSON.parse(JSON.stringify(w)),L=o([{name:"offcode",label:"Office Code",field:"offcode",align:"left",sortable:!0},{name:"offdesc",label:"Desc",field:"offdesc",align:"left",sortable:!0},{name:"action",label:"Action",field:"",required:!0,align:"center"}]),R=o(),z=a({isedit:!1,action:"Add",disable:!1,index:-1,office:v(h),oldid:""}),B=o(),I=async()=>{B.value.reset(),z.isedit=!1,z.disable=!1,z.action="Add",z.office=v(w),S.getOfficeAll()},M=async()=>{if(await B.value.validate()){console.log("ok");try{await S.saveOffice(z),I()}catch(e){}}},N=[e=>e&&e.length>0||"Required!"];return S.getOfficeAll(),(e,l)=>(i(),s(p,{padding:""},{default:c((()=>[d(n(t),{greedy:"",ref_key:"formRef",ref:B},{default:c((()=>[f("div",C,[f("div",x,[d(r,{dense:"",filled:"","lazy-rules":"",rules:N,label:"Office Code",modelValue:n(z).office.offcode,"onUpdate:modelValue":l[0]||(l[0]=e=>n(z).office.offcode=e)},null,8,["modelValue"])]),f("div",O,[d(r,{dense:"",filled:"","lazy-rules":"",rules:N,label:"Description",modelValue:n(z).office.offdesc,"onUpdate:modelValue":l[1]||(l[1]=e=>n(z).office.offdesc=e)},null,8,["modelValue"])])])])),_:1},512),f("div",Q,[f("div",q,[d(m,{outline:"",color:"primary",label:n(z).action},null,8,["label"])]),f("div",_,[d(u,{color:"warning",label:"Cancel",onClick:I}),d(u,{color:"primary",label:"Save",disable:n(z).disable,onClick:M},null,8,["disable"])])]),f("div",A,[f("div",D,[d(n(j),{loading:n(J).loadingBar.isActive,columns:L.value,rows:n(S).officeList,ref_key:"tblRef",ref:R},{"body-cell-action":c((({row:e,rowIndex:l})=>[d(b,null,{default:c((()=>[f("div",V,[d(u,{dense:"",round:"",color:"primary",icon:"info",onClick:l=>((e,l)=>{console.log(e),z.disable=!0,z.isedit=!0,z.action="Detail",z.office=e})(e)},null,8,["onClick"]),d(u,{dense:"",round:"",color:"warning",icon:"edit",onClick:o=>((e,l)=>{var o;console.log(e),z.index=l,z.isedit=!0,z.disable=!1,z.action="Edit",z.oldid=null!=(o=e.offcode)?o:"",z.office=v(e)})(e,l)},null,8,["onClick"]),d(u,{dense:"",round:"",color:"negative",icon:"delete",onClick:l=>((e,l)=>{var o;console.log(e),z.oldid=null!=(o=e.offcode)?o:"",z.office=v(e),z.action="Delete",J.dialog({title:"Confirm",message:"Yakin Delete?",cancel:!0,persistent:!0}).onOk((async()=>{await S.saveOffice(z)})).onCancel((()=>{})).onDismiss((()=>{I()}))})(e)},null,8,["onClick"])])])),_:2},1024)])),loading:c((()=>[d(g,{showing:"",color:"primary"})])),_:1},8,["loading","columns","rows"])])])])),_:1}))}});export{J as default};
